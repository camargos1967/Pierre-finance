<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pierre Finance</title>
    <style>
        :root {
            --warning: #ffcc00; /* Adicionando a variável CSS --warning */
        }
        .action-split {
            background-color: var(--warning); /* Corrigindo cor para usar a variável warning */
        }
    </style>
</head>
<body>
    <!-- Código do aplicativo Pierre Finance -->

    <script>
        function validateAmount(amount) {
            // Corrigindo a validação/parse do amount para aceitar vírgula e não rejeitar zero.
            let parsedAmount = parseFloat(amount.replace(',', '.'));
            if (isNaN(parsedAmount) || parsedAmount < 0) {
                throw new Error('Valor inválido!'); // Retornando erro se valor inválido.
            }
            return parsedAmount;
        }

        function sortTransactions(transactions) {
            // Usando cópia de transactions para sort, sem mutar o array original.
            return [...transactions].sort((a, b) => a.amount - b.amount);
        }

        function displayTransactions(transactions) {
            const container = document.getElementById('transaction-container');
            container.innerHTML = '';
            transactions.forEach(transaction => {
                const escapedDescription = escapeHTML(transaction.description);
                container.innerHTML += `<div>${escapedDescription} - ${transaction.amount}</div>`;
            });
        }

        function escapeHTML(unsafe) {
            // Funcão para escapar HTML e evitar XSS.
            return unsafe.replace(/&/g, '&amp;')
                          .replace(/</g, '&lt;')
                          .replace(/>/g, '&gt;')
                          .replace(/"/g, '&quot;')
                          .replace(/'/g, '&#039;');
        }

        function init() {
            const amountInput = document.getElementById('amount');
            amountInput.placeholder = 'Digite com ponto'; // Recomendações na placeholder.
            amountInput.addEventListener('input', function() {
                this.value = this.value.replace(',', '.'); // Convertendo vírgula para ponto automaticamente.
            });
        }

        window.onload = init;
    </script>
    <div id="transaction-container"></div>
</body>
</html>